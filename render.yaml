services:
  # Your WhatsApp Assistant (Flask + Gemini)
  - type: web
    name: waha-gemini-assistant
    runtime: docker
    region: oregon
    plan: free
    dockerfilePath: ./Dockerfile
    autoDeploy: true
    envVars:
      - key: SPOTIFY_CLIENT_ID
        fromSecret: SPOTIFY_CLIENT_ID
      - key: SPOTIFY_SECRET
        fromSecret: SPOTIFY_SECRET
      - key: SPOTIFY_REDIRECT_URI
        value: http://localhost:8888/callback
      - key: GEMINI_API_KEY
        fromSecret: GEMINI_API_KEY
      - key: GOOGLE_APPLICATION_CREDENTIALS
        value: /etc/secrets/credentials.json
      - key: GOOGLE_REDIRECT_URI
        value: https://your-app-name.onrender.com/oauth2callback
      - key: WAHA_URL
        value: http://waha-service:3000/sendText
      - key: WAHA_SESSION
        value: default

  # WAHA WhatsApp Gateway
  - type: web
    name: waha-service
    runtime: image
    region: oregon
    plan: free
    image:
      url: devlikeapro/waha:latest
    autoDeploy: true
    envVars:
      - key: WAHA_SESSION
        value: default